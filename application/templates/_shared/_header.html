{% from "_shared/_nav_link.html" import render_nav_link %}

<header id="global-header" class="with-proposition">
  <div class="header-wrapper">
    <div class="header-global">
      <div class="header-logo">
        <a href="{{ homepage_url|default('https://www.gov.uk') }}" title="{{ logo_link_title|default('Go to the GOV.UK homepage') }}" id="logo" class="content">
          <img src="/static/images/gov.uk_logotype_crown_invert_trans.png?0.19.2" width="36" height="32" alt="" /> GOV.UK
        </a>
      </div>
    </div>
    <div class="header-proposition">
      <div class="content">
        <nav id="proposition-menu">
          <a href="{{ url_for('static_site.index') }}" id="proposition-name">
            Ethnicity facts and figures
          </a>
          <ul class="header-nav">
            {{ render_nav_link(url=url_for('static_site.ethnicity_in_the_uk'), label="Ethnicity in the UK")}}
            {{ render_nav_link(url=url_for('static_site.background'), label="Background")}}
            
            {% if not static_mode and measure_page is defined and measure_page %}
              {% if measure_page.latest_version() %}
                {% set edit_measure_url = url_for('cms.edit_measure_page', topic_uri=topic_uri, subtopic_uri=subtopic_uri, measure_uri=measure_page.uri, version=measure_page.version) %}
                {% set export_measure_url = url_for('static_site.measure_page_markdown', topic_uri=topic_uri, subtopic_uri=subtopic_uri, measure_uri=measure_page.uri, version=measure_page.version) %}
              {% else %}
                {% set edit_measure_url = url_for('cms.list_measure_page_versions', topic_uri=topic_uri, subtopic_uri=subtopic_uri, measure_uri=measure_page.uri) %}
                {% set export_measure_url = url_for('cms.list_measure_page_versions', topic_uri=topic_uri, subtopic_uri=subtopic_uri, measure_uri=measure_page.uri) %}
              {% endif %}
              
              {{ render_nav_link(url=edit_measure_url, label="Edit") }}
              {{ render_nav_link(url=export_measure_url, label="Export") }}
            {% endif %}
          </ul>
        </nav>
      </div>
    </div>
    <div class="header-one-third">
      <a href="#search-form" class="search-toggle js-header-toggle" aria-expanded="false">Search</a>
      <form id="search-form" class="site-search" action="{{ config.GOOGLE_CUSTOM_SEARCH_ENDPOINT }}" method="get" role="search">
        <div class="content">
          <label for="site-search-text" class="site-search-label" id="site-search-label">Search</label>
          <input type="search" name="q" id="site-search-text" title="Search facts and figures" class="js-search-focus" value="{{ current_search_value if current_search_value is defined else '' }}">
          <input id="search-form-cx" type="hidden" name="cx" value="{{ config.GOOGLE_CUSTOM_SEARCH_ID }}">
          <input class="submit" type="submit" value="Search">
        </div>
      </form>
    </div>
  </div>
</header>
